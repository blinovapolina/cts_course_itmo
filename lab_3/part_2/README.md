# Лабораторная работа №3 (Часть 2)

## Вторая часть лабораторной работы

### Цели

Полный текст задания представлен в репозитории: https://github.com/inview-club/devops-cases/blob/main/05-whitespots/README-ru.md \

- Реализовать развертывание платформы безопасности - установить и настроить WhiteSpots (AppSec Portal + Auditor)
- Найти и проанализировать уязвимости в проекте
- Обеспечить отображение уязвимостей непосредственно в IDE

### Введение

Whitespots — это платформа для обнаружения и управления уязвимостями в приложениях.
AppSec Portal - это веб-интерфейс всей платформы.
Auditor - это движок, который выполняет анализ кода.

### Выполнение работы

#### Установка WhiteSpots (AppSec Portal + Auditor)

В документации (https://docs.whitespots.io/appsec-portal/deployment/installation) через docker compose указана комплексная установка всего стека (PostgreSQL, Rabbitmq и тд), которая больше подходит для продакшена и тестовых окружений с базами данных. \
Cначала для этой работы я выбрала более упрощенный способ установки: через уже собранный портал из образа `registry.whitespots.io/appsec-portal:latest`, - однако так как для этого способа нужен приватный доступ, вернулась к выполнению установки по инструкции из документации.

1. Сначала была создана папка `whitespots`, куда был склонирован репозиторий `https://gitlab.com/whitespots-public/appsec-portal.git`. После этого я перешла в папку `appsec-portal`

2. В корневом каталоге выполнила следующую команду для запуска скрипта `./set_vars.sh` (полное описание всех переменных, которые запрашивает скрипт, находится в документации по ссылке выше). Этот скрипт генерирует `.env` файл. Позже в самом файле я добавила версию образа (так как изначально при настройке забыла ее указать), а также лицензионный ключ, который был получен ранее

3. С помощью команды `sh run.sh` запустила портал AppSec. При выполнении этой команды вылезла ошибка, в которой появилась ошибка с доступом

4. Я произвела регистрацию на платформе `https://gitlab.com/users/sign_up`, добавила access-token, а затем попробовала снова ввести команду `sh run.sh`. Лог очень большой (не все есть на скринах), но где-то выскакивает проблема, что эти образы собраны под amd64, а у меня Apple Silicon (arm64), поэтому образы вроде `back`, `importer`, `jira_helper` зависают или падают. C помощью команды `docker-image` проверила собранные образы. Тут есть `appsec`, поэтому на проблемы с остальным можно не обращать внимание

5. Дальше скачивание Auditor по такой же схеме (https://docs.whitespots.io/auditor/deployment/installation)
